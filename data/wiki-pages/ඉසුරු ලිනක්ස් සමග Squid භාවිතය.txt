
=== ඉසුරු ලිනක්ස් සමග Squid භාවිතය. ===


==== හැදින්වීම. (What is squid3) ====
අපි අන්තර්ජාලයට පිවිසෙනකොට අපේ පරිගණකයට අනන්‍ය වූ හදුනාගැනීමක් අවශය කරන බව අපි දන්නවා. මෙම හදුනාගැනීම සිදුකරන්නෙ අපිට ලබා දෙන Public අයිපී ලිපිනයෙන්. එකම අයිපී ලිපිනයකින් දෙදෙනෙක් අන්තර්ජාලය තුල සිටිය නොහැකියි. හිතන්න පරිගණක 20 තියන අපේ ලැබ් එකට නිවැරදිවනම් අයිපී ලිපින 20 ක් ඹ්න කරනව. ඒක ටිකක් අපහසු වැඩක්, ෙහ්තුව Public අයිපී ලිපින කියන්ෙන සීමා සහිත ෙදයක් නිසා . ඉතින් මෙවැනි වගේ වෙලාවක එකම Public අයිපී ලිපිනයකින් පරිගණක විශාල ගණනකට අන්තර්ජාලය පරිශීලනය කරන්න හදපු ක්‍රමයක් තමයි අයිපී ලිපිනයට අමතරව Port එකකුත් ලබා දීම.
උදාහරණයක් විදියට 112.122.132.12 කියන අයිපී ලිපිනය අපිට අන්තර්ජාලය පරිශීලනය කිරීම සදහා පරිගණක කිහිපයකට ලබා දෙන්න පුළුවන් පහත විදියට
පරිගණක 01 : 112.122.132.12:1001
පරිගණක 02 : 112.122.132.12:1002
පරිගණක 03 : 112.122.132.12:1003
පරිගණක 04 : 112.122.132.12:1004
පරිගණක 05 : 112.122.132.12:1005
තාක්ෂණිකව ප්‍රොක්සියක් අවශහ්ය කරන්නෙ මෙන්න මෙ දේ සිදුකරගන්න. හැබැයි ප්‍රොක්සි භාවිතය කරන තවත් ජනපිය හේතවක් තමයි ප්‍රොක්සි සතුව තියන කියන caching හැකියාව.
ප්‍රොක්සිෙය ෙමම හැකියාව ගැන සරලවම කියුවොත් හරියට ගමේ කඩේ වගේ. ගමේ ඉන්න අයට ලේසියට ටවුමට නොයා ගමේ කඩෙන් බඩු ගන්නට පුළුවන්. කඩේ මුදලාලිට ටවුමට යන්න වෙනවා. ටවුමේ කෙනා ලොකු නගරයකට යනවා.
අන්න ඒ වගේ හිතන්න අපිට ලබා ගන්න අවශ්‍යය වෙබ් පිටුව හෝ ගොනුව තියෙන්නෙ ඇමරිකාවෙ කියල. එතකොට අපේ ජාලයේ ඉන්න හැමෝම ඒ වෙබ් පිටුව හෝ ගොනුව පරිශිලනය කරන්න ඹ්න සෑම විටම ඇමරිකාවෙ තියෙන සර්වරය දක්වාම යන්න වෙනව. නමුත් ප්‍රොක්සියකින් වෙන්නෙ යම් පරිශීලකයෙක් එම වෙබ් පිටුව හෝ ගොනුව පළමුවරට පරිශිලණය කිරීෙම්දී එය ඇමරිකාවෙ ඇති සර්වරයෙන් ලබා ගන්නා අතර එම ගොනුවෙ පිටපතක් ප්‍රොක්සිය තුල ගබඩා කර තබා ගැනීමයි. ඉන් පස්සෙ තවත් කෙනෙක් ඒ ගොණුවටම පිවිසෙන්න උත්සාහ කරොත් , ඒ ඉල්ලීම ප්‍රොක්සියට ඉටු කරන්න පුළුවන්. ඇමරිකාවෙ ඇති සර්වරය දක්වා යන්න ඹ්න නෑ.
ලැබ් එකට ප්‍රොක්සියක් දා ගත්තොත් ගොඩක් වෙලාවට ඩේටා ඉතිරි කරගන්නත් හොද වේගයක් ලබා ගන්නත් පුළුවන්. අඩු වේග සම්බන්ධතා සදහා බොහෝ වටිනව. මෙහිදී වාසිය එක පාරක් කඩේ ගියාම මුදලාලිට (ප්‍රොක්සි) තව කී දෙනෙක් ඉල්ලුවත් වෙනස් වෙලා නැත්නම් අර එකම දේ නැවත නැවත දෙන්න පුළුවන්. ප්‍රොක්සි වල තියෙන මෙම හැකියාව අපි Caching නමින් හදුන්වනව. අත්දැකීම් ඇති ගොඩක් පින්තූර තියෙන සයිට් වලට යද්දී සමහර වෙලාවට කලින් පිටුවේ තිබුන පින්තූර ටික අළුත් පිටුවේ ඉක්මනින් පෙන්නනවා. ඒ අපේ පරිගණකයේ ඒවා බාගත වෙලා තිබෙන නිසා වග ඔබ දන්නවා.
මීට අමතරවල

   * අපිට සයිට් බ්ලොක් කරන්න පුළුවන්.
   * භාවිතා කරන අය වැඩිපුරම යන්නේ මොන සයිට් වලටද කියලා ලොග් බලන්න පුළුවන්.
   * අවශ්‍යනම් ඩේටා ලිමිට් කරන්නත් පුළුවන්

.
විවෘත හා නිදහස් ෙක්ත ප්‍රොක්සි මෘදුකාංග ෙමන්ම වාණිජ ප්‍රොක්සි මෘදුකාංගත් තියනව.
Squid කියන්ෙන බහුලවම භාවිතා කරන විවෘත හා නිදහස් ෙක්ත ප්‍රොක්සි මෘදුකාංගයක්


==== අදියර පහකින් squid3 configure කරීම. ====


===== ලැබ් එකේ ජාලය Local Network නිවැරදි කර ගැනීම. =====
මෙහිදී ඔබ දැනට භාව්ති කරන්නේ ස්ව්‍යංක්‍රීය ලිපින බෙදීමේ ක්‍රමය (DHCP) නම් ඒය සුදුසු පරාසයක සිටින සේ පරිගණක IP සකස් කරගැනීම.
සර්වරය ලෙස කාර්යක්ෂම පරිගණකයක් තෝරා ගැනීම. 
ඒ සදහා IP අංකය ලෙස මතක සිටින එකක් වෙන් කර ගැනීම.(උදා : 192.168.1.100)
අන්තර්ජාල රවුටරයේ පරාසටම යොදා ගැනීම ඔබට පහසුය (192.168.any.any). 


===== පරීක්ෂා කිරීම 01 =====
ජාලය ක්‍රියාමක කර තහවුරු කරගන්න. 
සර්වරය සදහා තොරාගත් පරිගණකය ඉසුරු ලිනක්ස් විය යතුය. (ඉසුරු ආදරේට)
ටර්මිනලය විවෘත කර ifconfig විධානය කර IP අංකය නිවැරදි දැයි පරීක්ෂා කර ගන්න.

ධාවනය වන සේවා පරීක්ෂා කිරීමට nmap ලෙස යොදා හිස්තැනක් IP අංකය යොදන්න.

445/tcp open  ආදී ලෙස සදහන්ව ඇත්තේ ඒවාය.
මෙතන 3128/tcp open squid-http ලෙස නැතිනම් ඊලඟ අදියරට යන්න. 


===== squid server install කිරීම. =====
මේ සදහා terminal භාවිතා කිරීම වඩාත් පහසු වේ.
sudo apt-get install squid3 යන්න විධානය කල හැකිය. Yes යොදමින් ඉදිරියට යන්න. 
වැඩි හොදට sudo updatedb යන්නද භාවිතා කරන්න.
කිසිවක් නොවී මෙතනට ඒවි. 
දැන් නැවත ක්‍රියත්මක වන සේවාවන් nmap <IP> භාවිතයෙන් පරීක්ෂා කර බලන්න.
Squid or Squid3 ධාවනය නොවන්නේ නම් sudo service squid start විධානය කරන්න.
* එහිදී ඔබ ස්ථාපිත කල squid , squid2, squid3, or squid4 නිවැරිදිව යොදන්න. 
දැන් නැවතත් nmap <IP> භාවිතයෙන් පරීක්ෂා කර බලන්න.
මෙම 3128/tcp open ලෙස සදහන් කොටස තිබිය යුතුය.


===== Squid Configuration සැකසීම. =====
මෙහිදී squid.config ගොණුව සොයාගෙන වෙනස් කල යුතු කිහිපයක් තිබේ.
ගොනුව තිබෙන්නේ /etc/squid තුලය.  එයට පිවිසෙන්න cd /etc/squid ලෙස විධානය කරන්න. 
දැන් ls මගින් ගොනු පරීක්ෂා කර බලන්න.
එහි squid.conf ලෙස ගොණුවක් පෙනේවි එය backup පිටපත් කර ගන්න. ඒ සදහා sudo cp squid.conf squid.conf.backup ලෙස විධානය කරන්න. 
නැවත ls මගින් ගොණු පරීක්ෂා කර බලන්න. එවිට  squid.conf.backup තවත් එකක් තියේවි.
දැන් gedit භාවිතයෙන් පහත සදහන් වෙනස්කම් දෙක කර ගන්න. ඒ සදහා sudo gedit squid.conf ලෙස විධානය කරන්න.
එවිට මතුවන සංස්කරණ වැඩසටහන භාවිතයෙන් පහත පේලි දෙක සොයාගෙන එම වෙනස්කම් දෙක කරන්න. මේ සදහා ඔබට ctrl+f උදව් වේවි. 
i .  http_access deny all ලෙස සදහන්ව ඇති ස්ථානය සොයාගෙන එහි deny යන්න allow ලෙස වෙනස් කරන්න.
http_access deny all ==>   http_access allow all 
ii.   #cache_dir ufs /var/spool/squid 100 16 256 ලෙස සදහන් පේලිය සොයා එහි මුලින් ඇති # සලකුණ මකා දමන්න. කැමතිනම් 100 අගය 7000 දක්වා පමණ වූ ඉහල අගයකට වෙනස් කල හැකිය. එමගින් cash ධාරිතාවය තීරණය වේ.
දැන් මෙය save කර close කරන්න.
මෙම වෙනස්කම් server සදහා effect වීමට squid restart කල යුතුය ඒ සදහා  sudo service squid restart විධානය භාවිතා කරන්න. 
නැවතත් අවශ්‍යනම් nmap භාවිතයෙන් ධවනය වන බවට තහවුරු කරගන්න.


===== අවසන් අදියර network setting වල proxy setting apply කර ගැනීම. (අනෙක් පරිගණක වලදී) =====
windows වලදී
ලිනක්ස් (ඉසුරු) වලදී,
System Setting ==> Network ==> network proxy යටතේ ඔබෙගේ ip ලිපිණය හා prot 3128 ලබා දෙන්න.  පසුව Apply system wide කරන්න
පසුව සාමාන්‍ය පරිදි වෙබ් බ්‍රවුස් කල හැකිය. Browser setting වලත් use system proxy හදන්න අවශ්‍ය වේ.


=== ලොග් කියවීම හා සීමා යෙදීම. ===
වින්ඩොස් මැෂින් තියෙන ලැබ් වල අප්ඩේට් වලටත් හොද විසදුමක් ලෙස යෙදා ගත හැකිය. එක් පරිගණකයකට ඩවුන්ලොඩ් වෙන ඩේටා ගණන පමණක් වැයවේ.
ඉසුරු ලිනක්ස් (talk) 17:46, 19 ජූලි 2016 (යූටීසී) චතුර කුලතිලක ඉසුරු ලිනක්ස් (talk) 17:46, 19 ජූලි 2016 (යූටීසී)
--Kcmadushan (talk) 16:44, 21 ජූලි 2016 (යූටීසී) --රජිත උදයංග 05:35, 22 ජූලි 2016 (යූටීසී)